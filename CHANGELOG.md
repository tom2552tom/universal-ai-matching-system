# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

---

## [1.0.4] - 2025-11-01

### Added
- **AIによる自動マッチングと通知機能**:
  - 案件・技術者詳細ページから、新規に登録されるレコードとの自動マッチングを依頼できるようになりました。
  - 設定したランク以上のマッチングが発見された場合、指定したメールアドレスに通知が送信されます。
  - 通知メールには、関連する案件・技術者・マッチング詳細ページへの直接リンクが含まれます。
- **マッチング済みリストのクリア機能**:
  - 案件・技術者詳細ページに、現在のマッチング結果一覧を手動でクリアするボタンを追加しました。

### Changed
- **バッチ処理のアーキテクチャ改善**:
  - cronで実行されるバッチ処理 (`run_auto_matcher.py`, `run_email_processor.py`) が `st.secrets` に依存しない、完全に自己完結したスタンドアロンなスクリプトになるよう修正しました。
  - API呼び出しに自動リトライ処理と適切な待機時間を導入し、レート制限や一時的なエラーに対する耐性を向上させました。

### Fixed
- **データベースのパフォーマンス問題**:
  - `DELETE` 操作時のタイムアウト問題を解決するため、`matching_results` テーブルの `job_id`, `engineer_id` カラムにインデックスを追加しました。
  - `jobs`, `engineers` テーブルの `assigned_user_id` カラムにもインデックスを追加し、担当者での絞り込みやダッシュボード表示を高速化しました。
- **cronジョブの実行失敗**:
  - macOS環境でcronジョブが実行されない問題を、「フルディスクアクセス」権限の付与と、スクリプトの実行権限 (`chmod +x`)、拡張属性の削除 (`xattr -c`) によって解決しました。

---

## [1.0.3] - 2025-10-31

### Changed
- **UI/UXの改善**:
  - 案件・技術者管理画面の一覧で、マッチング件数等のインジケーターを視認性の高いチップ（Chip）風のデザインに統一しました。
- **フィルター機能のロジック改善**:
  - 担当者フィルターに「（未担当）」の選択肢を追加し、複数のフィルター条件を組み合わせた際のSQLクエリを、`EXISTS` を用いたより堅牢なものに修正しました。

### Fixed
- **LLM応答のパースエラー**:
  - AI(LLM)が返す多様な形式の不正なJSON文字列に対応するため、JSONの抽出・修復ロジックを大幅に強化しました。これにより、マッチング評価の成功率が向上しました。
- **メール通知のURLリンク不具合**:
  - 通知メール内のURLに日本語が含まれているとリンクとして機能しない問題を、URLエンコーディングを適用することで解決しました。

---

## [1.0.2] - 2025-10-27

### Added
- **AIアシスタント機能**:
  - 案件情報や技術者情報を貼り付けるだけで、対話形式でオンデマンドにマッチング候補を検索できる「AIアシスタント」ページを新規追加しました。
  - 評価プロセスがリアルタイムで表示され、ユーザーは自分のペースで候補を確認できます。

---

## [1.0.1] - 2025-10-27

### Added
- **AIによるフィードバック分析機能**:
  - マッチング詳細画面で担当者が入力したフィードバックをAIが分析し、「AIの学習メモ」として分析結果を表示する機能を追加しました。

---

## [1.0.0] - 2025-10-25

### Added
- **初期バージョンリリース**
- **単価フィルター機能**:
  - 案件と技術者の単価を比較し、ミスマッチが大きい候補を自動的に除外するロジックを導入しました。
- **添付ファイルの対応形式拡張**:
  - メールの自動解析機能で、新たにExcel (.xlsx, .xls) ファイルのテキスト抽出に対応しました。

### Changed
- **メール処理のパフォーマンス改善**:
  - 一度に大量のメールを処理する際の安定性を向上させました。
